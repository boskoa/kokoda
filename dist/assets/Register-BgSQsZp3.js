import{r as t,a as h,s as F,F as U,H as I,u as M,g as A,C as B,J as N,j as e,K as k}from"./index-U5YyuKpV.js";import{FormContainer as D,Title as G,InputContainer as i,AuthInput as l,Error as c,ButtonContainer as H,Button as b,ReqError as J}from"./index-BBhQzrfr.js";function W(){var j,w,E,S,$,L,v,y;const[m,u]=t.useState(!1),n=h(F),r=h(U),d=h(I),g=M(),[R,p]=t.useState(0),x=A(),{register:o,handleSubmit:C,formState:{errors:s,isValid:T}}=B({mode:"onChange"});t.useEffect(()=>{const a=setTimeout(()=>p(1),250);return()=>{x(N()),clearTimeout(a)}},[]),t.useEffect(()=>{m&&!r&&!d?(u(!1),f()):m&&r&&!d&&u(!1)},[m,r,d]),t.useEffect(()=>{n!=null&&n.username&&g(-1)},[n]);function f(){p(0);const a=setTimeout(()=>g("/authentication/login"),250);return()=>clearTimeout(a)}function q(a){x(k(a)),u(!0)}return e.jsxs(D,{onSubmit:C(q),$opacity:R,$rotate:"-180deg",children:[e.jsx(G,{children:"REGISTER"}),e.jsxs(i,{children:[e.jsx(l,{$color:s.name?"red":"gold",autoFocus:!0,placeholder:"name",name:"name",type:"text",...o("name",{required:!0,minLength:{value:2,message:"More than 1 character."},maxLength:{value:30,message:"Less than 31 characters."}})}),e.jsx(c,{$show:(j=s.name)==null?void 0:j.message,children:(w=s.name)==null?void 0:w.message})]}),e.jsxs(i,{children:[e.jsx(l,{$color:s.username?"red":"gold",placeholder:"username",name:"username",type:"text",...o("username",{required:!0,minLength:{value:2,message:"More than 1 character."},maxLength:{value:20,message:"Less than 21 characters."}})}),e.jsx(c,{$show:(E=s.username)==null?void 0:E.message,children:(S=s.username)==null?void 0:S.message})]}),e.jsxs(i,{children:[e.jsx(l,{$color:s.email?"red":"gold",placeholder:"email",name:"email",type:"email",...o("email",{required:!0,pattern:{value:/\S+@\S+\.\S+/,message:"Wrong email format"}})}),e.jsx(c,{$show:($=s.email)==null?void 0:$.message,children:(L=s.email)==null?void 0:L.message})]}),e.jsxs(i,{children:[e.jsx(l,{$color:s.password?"red":"gold",placeholder:"password",name:"password",type:"password",...o("password",{required:!0,minLength:{value:6,message:"More than 5 character."}})}),e.jsx(c,{$show:(v=s.password)==null?void 0:v.message,children:(y=s.password)==null?void 0:y.message})]}),e.jsxs(H,{children:[e.jsx(b,{onClick:f,type:"button",children:"Already registered?"}),e.jsx(b,{$disabled:!T,type:"submit",children:"Register"})]}),e.jsx(J,{$show:r,children:r})]})}export{W as default};
